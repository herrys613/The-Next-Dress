<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sell Your Dress | The Next Dress</title>
    <meta name="description" content="Sell your dress online in just a few clicks. Simple, smooth, and fast.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Sell Your Dress | The Next Dress">
    <meta property="og:description" content="Sell your dress online in just a few clicks. Simple, smooth, and fast.">
    <meta property="og:url" content="https://www.thenextdress.com/sell-your-dress/">
    <meta property="og:image" content="https://www.thenextdress.com/images/sell-your-dress-social-preview.png">
    <meta property="og:image:alt" content="Sell Your Dress Online Easily at The Next Dress">
    <meta property="og:site_name" content="The Next Dress">

    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
    <link rel="canonical" href="https://www.thenextdress.com/sell-your-dress/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/tailwind.config.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<style>
    .error-message {
        color: #ef4444;
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: none;
    }

    .field-error {
        border-color: #ef4444 !important;
    }
</style>

<body>
    <!-- Navbar -->
    <header class="bg-white border-b border-gray-200">
        <nav x-data="{ isOpen: false }" class="max-w-[2000px] p-5 mx-auto lg:px-8 lg:py-5">
            <div class="flex justify-between items-center relative">
                <!-- Logo -->
                <a href="/">
                    <img class="h-8 sm:h-10" src="/images/logo.png" alt="logo">
                </a>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex absolute left-1/2 transform -translate-x-1/2 space-x-12">
                    <a href="/" class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Home</a>
                    <a href="/shop-collection/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">About
                        us</a>
                    <a href="/contact/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Contact</a>
                </div>


                <!-- Login -->
                <div class="hidden lg:flex items-center">
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login/">
                        Log in
                    </a>
                </div>

                <!-- Mobile menu button -->
                <div class="flex lg:hidden">
                    <button x-cloak @click="isOpen = !isOpen" type="button"
                        class="text-charcoal-800  hover:text-charcoal-900  focus:outline-none focus:text-charcoal-900"
                        aria-label="toggle menu">
                        <svg x-show="!isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
                        </svg>

                        <svg x-show="isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu open: "block", Menu closed: "hidden"-->
            <div x-cloak :class="[isOpen ? 'translate-x-0 opacity-100 ' : 'opacity-0 -translate-x-full']"
                class="lg:hidden absolute inset-x-0 transition-all duration-300 ease-in-out bg-white border-b border-gray-200 shadow-lg z-40">
                <div class="px-4 py-6 space-y-4">
                    <a href="/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Home</a>
                    <a href="/shop-collection/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">About
                        us</a>
                    <a href="/contact/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Contact</a>
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login/">
                        Log in
                    </a>
                </div>
            </div>
        </nav>
    </header>


    <div class="max-w-3xl mx-auto pt-20 px-6 space-y-8">
        <!-- Page Header -->
        <div class="text-center">
            <h1 class="text-3xl font-luxury font-bold text-charcoal-800 mb-2">Sell Your Dress</h1>
            <p class="text-lg text-charcoal-600">List your dress and connect with potential buyers in our community</p>
        </div>

        <!-- Selling Tips -->
        <div class="max-w-4xl mx-auto bg-cream-500 border border-cream-600 rounded-xl p-6 flex space-x-4">
            <div>
                <h3 class="text-lg font-semibold text-warm-gray-700 mb-3">Sell Smart, Sell Fast</h3>
                <ul class="space-y-2 text-sm text-warm-gray-600 leading-relaxed ">
                    <li><span class="text-warm-gray-700 font-semibold">Photos First:</span> Clear, full-length shots in
                        good light. Include
                        front, back, and close-up details.</li>
                    <li><span class="text-warm-gray-700 font-semibold">On a Person:</span> Dresses show best when
                        modeled, not on hangers.
                    </li>
                    <li><span class="text-warm-gray-700 font-semibold">Pricing:</span> Most sellers list around half the
                        original price.
                        Want it gone fast? Price it lower for a quick sale.</li>
                    <li><span class="text-warm-gray-700 font-semibold">Be Specific:</span> Highlight fit, fabric, and
                        features shoppers
                        care about.</li>
                </ul>
            </div>
        </div>

        <form id="dress-form" class="py- space-y-6" novalidate>
            <!-- Seller Information -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-user text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Seller Information</h2>
                        <p class="text-sm text-gray-500">Provide your contact details</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="first-name" class="block text-sm font-medium text-gray-700">
                            First Name <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="first-name" name="firstName" required autocomplete="given-name"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200"
                            placeholder="Enter your first name" />
                        <p class="error-message" id="first-name-error">Please enter your first name</p>
                    </div>

                    <div class="space-y-2">
                        <label for="last-name" class="block text-sm font-medium text-gray-700">
                            Last Name <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="last-name" name="lastName" required autocomplete="family-name"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200"
                            placeholder="Enter your last name" />
                        <p class="error-message" id="last-name-error">Please enter your last name</p>
                    </div>

                    <div class="space-y-2">
                        <label for="phone" class="block text-sm font-medium text-gray-700">
                            Phone Number <span class="text-red-500">*</span>
                        </label>
                        <input type="tel" id="phone" name="phone" required autocomplete="tel"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200"
                            placeholder="(555) 123-4567" />
                        <p class="error-message" id="phone-error">Please enter a valid phone number</p>
                    </div>

                    <div class="space-y-2">
                        <label for="email" class="block text-sm font-medium text-gray-700">
                            Email Address <span class="text-red-500">*</span>
                        </label>
                        <input type="email" id="email" name="email" required autocomplete="email"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200"
                            placeholder="your.email@example.com" />
                        <p class="error-message" id="email-error">Please enter a valid email address</p>
                    </div>
                </div>

                <!-- Contact Preferences -->
                <div class="p-6 bg-gray-50 rounded-xl space-y-3">
                    <label class="block  text-sm font-medium text-gray-700">
                        Preferred Contact Methods <span class="text-red-500">*</span>
                    </label>
                    <p class="text-sm text-gray-500">Select at least one way buyers can contact you</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" name="contactMethods" value="Phone Call"
                                class="form-checkbox h-4 w-4 text-cream-900 rounded focus:ring-cream-800">
                            <span class="text-sm text-gray-700">Phone Call</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" name="contactMethods" value="Text Message"
                                class="form-checkbox h-4 w-4 text-cream-900 rounded focus:ring-cream-800">
                            <span class="text-sm text-gray-700">Text Message</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" name="contactMethods" value="Whatsapp"
                                class="form-checkbox h-4 w-4 text-cream-900 rounded focus:ring-cream-800">
                            <span class="text-sm text-gray-700">WhatsApp</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" name="contactMethods" value="Email"
                                class="form-checkbox h-4 w-4 text-cream-900 rounded focus:ring-cream-800">
                            <span class="text-sm text-gray-700">Email</span>
                        </label>
                    </div>
                    <p class="error-message" id="contact-methods-error">Please select at least one contact method</p>
                </div>
            </section>

            <hr class="border-gray-200">

            <!-- Dress Information Section -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-info-circle text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Dress Information</h2>
                        <p class="text-sm text-gray-500">Basic details about your dress</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="dress-title" class="block text-sm font-medium text-gray-700">
                            Dress Title <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="dress-title" name="dressTitle" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200"
                            placeholder="e.g. Elegant Evening Gown" />
                        <p class="error-message" id="dress-title-error">Please enter the dress Title</p>
                    </div>

                    <div class="space-y-2 relative" id="brand-container">
                        <label class="block text-sm font-medium text-gray-700">Brand</label>
                        <div class="custom-select w-full" data-placeholder="Select Brand" data-name="brand"
                            data-options='["Vera Wang", "Monique Lhuillier", "Elie Saab", "Ines Di Santo", "Galia Lahav", "Viktor & Rolf Mariage", "Berta Bridal", "Zuhair Murad", "Carolina Herrera", "Oscar de la Renta", "Carmen Marc Valvo", 
                            "Chiara Boni La Petite Robe", "Mac Duggal", "Teri Jon by Rickie Freeman", "Tadashi Shoji", "Kobi Halperin", "Jenny Packham", "Zac Posen", "Azzedine Alaïa", "Reem Acra", "Other"]'>
                        </div>
                    </div>

                    <div class="space-y-2 relative" id="category-container">
                        <label class="block text-sm font-medium text-gray-700">Category</label>
                        <div class="custom-select w-full" data-placeholder="Select Category" data-name="category"
                            data-options='["Bridal","Mother of the Bride","Maternity","Kids"]'>
                        </div>
                    </div>

                </div>
            </section>

            <hr class="border-gray-200">

            <!-- Photos Section -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-images text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Photos</h2>
                        <p class="text-sm text-gray-500">Upload clear, high-quality photos of your dress</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div
                        class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-cream-800 transition-colors duration-200">
                        <input type="file" id="dropzone-file" name="photos" class="hidden" multiple accept="image/*" />
                        <label for="dropzone-file" class="cursor-pointer block">
                            <div class="space-y-3">
                                <i class="fas fa-cloud-upload-alt text-5xl text-gray-400"></i>
                                <div>
                                    <p class="text-lg font-medium text-gray-700">Upload Dress Photos</p>
                                    <p class="text-sm text-gray-500">Drag and drop files here, or click to select</p>
                                </div>
                                <p class="text-xs text-gray-400">PNG, JPG up to 5MB each • Maximum 5 photos</p>
                            </div>
                        </label>

                    </div>

                    <div id="image-preview" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3 mt-4"></div>
                    <p class="text-sm text-gray-500">First photo is used as the cover</p>
                    <p class="error-message" id="photos-error">Please upload at least one photo</p>
                </div>
            </section>

            <hr class="border-gray-200">

            <!-- Details Section -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-tag text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Details</h2>
                        <p class="text-sm text-gray-500">Specific information about your dress</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2 relative" id="size-container">
                        <label class="block text-sm font-medium text-gray-700">Size <span
                                class="text-red-500">*</span></label>
                        <div class="custom-select w-full" data-placeholder="Select Size" data-name="size"
                            data-options='["0-32","2-34","4-36","6-38","8-40","10-42","12-44","14-46","16-48","18-50","Other"]'>
                        </div>
                        <p class="error-message" id="size-error">Please select a size
                        </p>
                    </div>

                    <div class="space-y-2 relative" id="color-container">
                        <label class="block text-sm font-medium text-gray-700">Color <span
                                class="text-red-500">*</span></label>
                        <div class="custom-select w-full" data-placeholder="Select Color" data-name="color"
                            data-options='["Multi","Black","Blue","Brown","Gold","Green","Grey","Ivory","Orange","Pink","Purple","Red","Silver","White","Yellow","Other"]'>
                        </div>
                        <p class="error-message" id="color-error">Please select a color
                        </p>
                    </div>

                    <div class="space-y-2 relative" id="condition-container">
                        <label class="block text-sm font-medium text-gray-700">
                            Condition <span class="text-red-500">*</span></label>
                        <div class="custom-select w-full" data-placeholder="Select Condition" data-name="condition"
                            data-options='["New","Used"]'>
                        </div>
                        <p class="error-message" id="condition-error">Please select a
                            condition</p>
                    </div>

                    <div class="space-y-2 relative" id="location-container">
                        <label class="block text-sm font-medium text-gray-700">Location <span
                                class="text-red-500">*</span></label>
                        <div class="custom-select w-full" data-placeholder="Select Location" data-name="location"
                            data-options='["Boro Park NY","Crown Heights NY","Deal NJ","Far Rockaway NY","Flatbush NY","Jackson NJ","Lakewood NJ","Lawrence NY","Long Island NY","Monroe NY","Monsey NY","Upstate NY","Williamsburg NY","Montreal - CA","Toronto - CA","London - UK","Manchester - UK","Antwerp - EU","Belgium - EU","Israel","Other"]'>
                        </div>
                        <p class="error-message" id="location-error">Please select a
                            location</p>
                    </div>

                </div>
            </section>

            <hr class="border-gray-200">

            <!-- Pricing Section -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-dollar-sign text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Pricing</h2>
                        <p class="text-sm text-gray-500">Set your asking price and original cost</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="dress-asking-price" class="block text-sm font-medium text-gray-700">
                            Asking Price <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <span
                                class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg">$</span>
                            <input type="number" id="dress-asking-price" name="askingPrice" placeholder="0.00" min="0"
                                step="5.00" required
                                class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200" />
                        </div>
                        <p class="error-message" id="dress-asking-price-error">Please enter a valid asking price</p>
                    </div>

                    <div class="space-y-2">
                        <label for="dress-paid" class="block text-sm font-medium text-gray-700">
                            Original Price Paid</label>
                        <div class="relative">
                            <span
                                class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg">$</span>
                            <input type="number" id="dress-paid" name="originalPrice" placeholder="0.00" min="0"
                                step="5.00" required
                                class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200" />
                        </div>
                        <p class="error-message" id="dress-paid-error">Please enter the original price paid</p>
                    </div>
                </div>

                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div>
                        <label class="text-sm font-medium text-gray-700">Price
                            Negotiable?</label>
                        <p class="text-xs text-gray-500">Allow buyers to make offers</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="dress-negotiable" class="sr-only peer">
                        <div
                            class="w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-cream-800 transition-all duration-300">
                        </div>
                        <div
                            class="absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow-md transform transition-all peer-checked:translate-x-full">
                        </div>
                    </label>
                </div>
            </section>

            <hr class="border-gray-200">

            <!-- Additional Information Section -->
            <section class="px-1 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-comment text-cream-900 text-2xl"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-charcoal-800">Additional Information</h2>
                        <p class="text-sm text-gray-500">Any extra details that might help sell your dress</p>
                    </div>
                </div>

                <div class="space-y-2">
                    <label for="dress-description" class="block text-sm font-medium text-gray-700">
                        Description (Optional)
                    </label>
                    <textarea id="dress-description" name="description" rows="6" maxlength="500"
                        placeholder="Describe special features, occasions it's perfect for, alterations made, or any other relevant details that might interest buyers..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900 focus:border-transparent transition-all duration-200 custom-scroll resize-none"></textarea>
                    <div class="flex justify-between items-center text-xs text-gray-500">
                        <span>Optional but recommended for better visibility</span>
                        <span id="char-count">0/500</span>
                    </div>
                </div>
                <button id="reset-btn"
                    class="flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors duration-200">
                    <i class="fas fa-undo mr-2"></i>Reset Form
                </button>
            </section>


            <hr class="border-gray-200">
            <!-- Header -->
            <div class="py-8 space-y-6">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Complete Payment</h2>
                    <div class="flex items-center justify-center gap-2 text-sm text-gray-600">
                        <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span>Secure payment processing by Stripe</span>
                    </div>
                </div>

                <!-- Card Element Container -->
                <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700">
                        Card Information
                    </label>
                    <div id="card-element"
                        class="border border-gray-300 rounded-lg p-4 bg-white transition-colors focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500">
                        <!-- Stripe Elements will insert the card input here -->
                    </div>
                    <div id="card-errors" class="text-red-500 text-sm min-h-[1.25rem]"></div>

                    <!-- Coupon Code -->
                    <div class="space-y-2">
                        <label for="coupon-code" class="block text-sm font-medium text-gray-700">Coupon Code</label>
                        <div class="flex gap-2">
                            <input type="text" id="coupon-code" placeholder="Enter coupon"
                                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                            <button type="button" id="apply-coupon"
                                class="px-4 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors">Apply</button>
                        </div>
                        <p id="coupon-message" class="text-sm mt-1"></p>
                    </div>
                </div>


                <!-- Order Summary -->
                <div class="bg-gray-50 rounded-lg p-6 space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                            </path>
                        </svg>
                        Order Summary
                    </h3>

                    <div class="space-y-3">
                        <div class="flex justify-between items-center py-2">
                            <div class="flex flex-col">
                                <span class="text-gray-700 font-medium">Listing Fee</span>
                                <span class="text-xs text-gray-500">One-time listing fee</span>
                            </div>
                            <span class="font-semibold text-gray-900" id="listing-fee">$29.99</span>
                        </div>
                        <!-- Discount row (hidden until applied) -->
                        <div class="flex justify-between items-center py-2 hidden" id="discount-row">
                            <span class="text-gray-700 font-medium">Discount</span>
                            <span class="font-semibold text-gray-600" id="discount-amount">- $0.00</span>
                        </div>

                        <hr class="border-gray-200">

                        <div class="flex justify-between items-center py-2">
                            <span class="text-lg font-bold text-gray-900">Total</span>
                            <span class="text-lg font-bold text-blue-600" id="order-total">$29.99</span>
                        </div>
                    </div>
                </div>

                <!-- Payment Button -->
                <button type="submit" id="submit-btn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-cream-900 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                        </path>
                    </svg>
                    Complete Secure Payment
                </button>

                <!-- Security Notice -->
                <div class="text-center">
                    <p class="text-xs text-gray-500 flex items-center justify-center gap-2">
                        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                clip-rule="evenodd"></path>
                        </svg>
                        Your payment information is encrypted and secure
                    </p>
                </div>
            </div>
        </form>
    </div>


    <!-- Reset Confirmation Modal (Add this before the closing </body> tag) -->
    <div id="reset-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 animate-slideIn">
            <div class="p-6">
                <div class="flex items-center mb-4">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                        <i class="fas fa-undo text-red-600 text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-charcoal-800">Reset Form</h3>
                        <p class="text-sm text-gray-600">This action cannot be undone</p>
                    </div>
                </div>
                <p class="text-gray-700 mb-6">Are you sure you want to reset the form? All entered data, uploaded
                    images, and form progress will be permanently lost.</p>
                <div class="flex gap-3">
                    <button id="cancel-reset"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors">
                        Cancel
                    </button>
                    <button id="confirm-reset"
                        class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors">
                        Reset Form
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-cream-200 border-t">
        <div class="max-w-[2000px] p-6 lg:pt-10 lg:px-16 mx-auto">
            <div class="lg:flex">
                <div class="w-full pb-8 lg:w-2/5">
                    <a href="/">
                        <img class="w-auto h-9" src="/images/logo.png" alt="logo">
                    </a>
                    <p class="max-w-sm text-xs text-charcoal-800">Modest Dress Marketplace.</p>
                    <div class="flex space-x-4 mt-4">
                        <a href="https://wa.me/9175837073" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Chat on WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://instagram.com/" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Visit Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>

                <div class="mt-0 lg:mt-0 lg:flex-1">
                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3">
                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Company</h3>
                            <a href="/shop-collection/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Shop
                                Collection</a>
                            <a href="/sell-your-dress/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Sell
                                Your Dress</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Partner
                                with
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Support</h3>
                            <a href="/#faq" class="block mt-2 text-sm text-charcoal-600  hover:underline">FAQ</a>
                            <a href="/pricing/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Pricing</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Contact
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Get in touch</h3>
                            <span class="block mt-2 text-sm text-charcoal-600  hover:underline">+1 (555)
                                000-0000</span>
                            <span
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">thenextdresscollection@gmail.com</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="h-px my-6 bg-gray-200 border-none ">

            <div>
                <p class="text-center text-charcoal-600">&copy;
                    <script>
                        document.write(new Date().getFullYear())
                    </script> The next dress. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyDzYucxzEhmH3XgxGZd_YODxzzvpNp2P0s",
            authDomain: "project-2145d.firebaseapp.com",
            projectId: "project-2145d",
            storageBucket: "project-2145d.firebasestorage.app",
            messagingSenderId: "296278039161",
            appId: "1:296278039161:web:e1049596a67bfe51ab12a8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        // Stripe
        const stripe = Stripe("test_only");

        const elements = stripe.elements();
        const cardElement = elements.create("card");
        cardElement.mount("#card-element");


        // Character counter for description
        const descriptionTextarea = document.getElementById('dress-description');
        const charCount = document.getElementById('char-count');

        descriptionTextarea.addEventListener('input', function () {
            const currentLength = this.value.length;
            charCount.textContent = `${currentLength}/500`;

            if (currentLength > 450) {
                charCount.classList.add('text-red-500');
            } else {
                charCount.classList.remove('text-red-500');
            }
        });


        // ========================================
        // COUPON SYSTEM 
        // ========================================

        const applyCouponBtn = document.getElementById('apply-coupon');
        const couponCodeInput = document.getElementById('coupon-code');
        const couponMessage = document.getElementById('coupon-message');
        const discountRow = document.getElementById('discount-row');
        const discountAmount = document.getElementById('discount-amount');
        const orderTotal = document.getElementById('order-total');

        let basePrice = 29.99;
        let discountValue = 0;

        // On page load, set initial prices
        document.getElementById("listing-fee").textContent = `$${basePrice.toFixed(2)}`;
        document.getElementById("order-total").textContent = `$${basePrice.toFixed(2)}`;

        const validCoupons = {
            'SAVE10': { discount: 10, type: 'percentage' },
            'FIRST15': { discount: 29.99, type: 'fixed' },
            'WELCOME': { discount: 15, type: 'percentage' }
        };

        couponCodeInput.addEventListener("input", () => {
            couponCodeInput.value = couponCodeInput.value.toUpperCase();
        });

        applyCouponBtn.addEventListener('click', function () {
            const couponCode = couponCodeInput.value.trim().toUpperCase();

            if (!couponCode) {
                couponMessage.textContent = 'Please enter a coupon code';
                couponMessage.className = 'text-sm mt-1 text-red-500';
                return;
            }

            if (validCoupons[couponCode]) {
                const coupon = validCoupons[couponCode];

                if (coupon.type === 'percentage') {
                    discountValue = (basePrice * coupon.discount) / 100;
                } else {
                    discountValue = coupon.discount;
                }

                // Ensure discount doesn't exceed the base price
                discountValue = Math.min(discountValue, basePrice);

                // Update UI
                discountAmount.textContent = `- $${discountValue.toFixed(2)}`;
                discountRow.classList.remove('hidden');
                orderTotal.textContent = `$${(basePrice - discountValue).toFixed(2)}`;

                couponMessage.textContent = `Coupon applied! You saved $${discountValue.toFixed(2)}`;
                couponMessage.className = 'text-sm mt-1 text-green-500';

            } else {
                // Invalid coupon → reset
                discountValue = 0;
                discountRow.classList.add('hidden');
                orderTotal.textContent = `${basePrice.toFixed(2)}`;

                couponMessage.textContent = 'Invalid coupon code';
                couponMessage.className = 'text-sm mt-1 text-red-500';
            }

            const totalStr = orderTotal.textContent.replace('$', '');
            const totalAmount = parseFloat(totalStr);
            if (totalAmount <= 0) {
                const cardErrors = document.getElementById('card-errors');
                cardErrors.textContent = '';

                cardElement.clear();
                cardElement.update({});
            }
        });

        // ========================================
        // IMAGE HANDLING
        // ========================================

        let uploadedFiles = [];

        function initializeFileUpload() {
            const dropzoneFile = document.getElementById('dropzone-file');
            const dropzoneArea = dropzoneFile.parentElement;

            // File selection handler
            dropzoneFile.addEventListener('change', handleFileSelect);

            // Drag and drop handlers
            dropzoneArea.addEventListener('dragover', handleDragOver);
            dropzoneArea.addEventListener('dragleave', handleDragLeave);
            dropzoneArea.addEventListener('drop', handleDrop);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('border-cream-800', 'bg-cream-50');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('border-cream-800', 'bg-cream-50');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('border-cream-800', 'bg-cream-50');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            processFiles(files);
        }

        function processFiles(files) {
            const photosError = document.getElementById('photos-error');
            const remainingSlots = 5 - uploadedFiles.length;

            // Reset error
            photosError.textContent = '';
            photosError.style.display = 'none';

            if (remainingSlots <= 0) {
                photosError.textContent = 'Maximum 5 photos allowed';
                photosError.style.display = 'block';
                return;
            }

            const filesToAdd = files.slice(0, remainingSlots);
            let errorShown = false;

            filesToAdd.forEach(file => {
                if (!file.type.startsWith('image/')) {
                    if (!errorShown) {
                        photosError.textContent = 'Only image files are allowed.';
                        photosError.style.display = 'block';
                        errorShown = true;
                    }
                    return;
                }

                if (file.size > 5 * 1024 * 1024) {
                    if (!errorShown) {
                        photosError.textContent = 'Some files were too large. Maximum size is 5MB per image.';
                        photosError.style.display = 'block';
                        errorShown = true;
                    }
                    return;
                }

                uploadedFiles.push(file);
                displayImage(file, uploadedFiles.length - 1);
            });

            // Only validate if there is no other error
            if (!errorShown) {
                validatePhotos();
            }
        }


        function displayImage(file, index) {
            const imagePreview = document.getElementById('image-preview');
            const reader = new FileReader();

            reader.onload = function (e) {
                const imageContainer = document.createElement('div');
                imageContainer.className = 'relative aspect-square rounded-lg overflow-hidden bg-gray-100';
                imageContainer.setAttribute('data-index', index);

                imageContainer.innerHTML = `
            <img src="${e.target.result}" alt="Preview ${index + 1}" class="w-full h-full object-cover">
            <button type="button" onclick="removeImage(${index})" title="Remove image" 
    class="absolute top-2 right-1 bg-red-500/90 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center cursor-pointer text-sm">
    <i class="fas fa-times"></i>
  </button>
            ${index === 0 ? '<div class="absolute bottom-1 left-1 bg-black bg-opacity-70 text-white text-xs px-1 rounded">Cover</div>' : ''}
        `;

                imagePreview.appendChild(imageContainer);
            };

            reader.readAsDataURL(file);
        }

        function removeImage(index) {
            uploadedFiles.splice(index, 1);
            refreshImagePreview();
            validatePhotos();
        }

        function refreshImagePreview() {
            const imagePreview = document.getElementById('image-preview');
            imagePreview.innerHTML = '';
            uploadedFiles.forEach((file, index) => {
                displayImage(file, index);
            });
        }

        function validatePhotos() {
            const photosError = document.getElementById('photos-error');

            if (uploadedFiles.length === 0) {
                photosError.textContent = 'Please upload at least one photo';
                photosError.style.display = 'block';
                return false;
            }

            photosError.textContent = '';
            photosError.style.display = 'none';
            return true;
        }

        // Initialize on page load
        initializeFileUpload();



        // ========================================
        // Custom dropdown & select
        // ======================================== 

        function initializeCustomSelects() {
            let openDropdown = null;

            document.querySelectorAll('.custom-select').forEach(container => {
                const placeholder = container.dataset.placeholder;
                const options = JSON.parse(container.dataset.options);
                const name = container.dataset.name;

                // Store selected value
                container.selectedValue = '';

                // Create selected box
                const selectBox = document.createElement('div');
                selectBox.className = 'w-full px-4 py-3 border border-gray-300 rounded-lg cursor-pointer flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-cream-900';
                selectBox.innerHTML = `<span>${placeholder}</span><i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>`;
                container.appendChild(selectBox);

                // Create options container
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'absolute z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto hidden custom-scroll';
                options.forEach(opt => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'px-4 py-2 hover:bg-gray-100 cursor-pointer';
                    optionDiv.textContent = opt;
                    if (opt.toLowerCase() === 'other') optionDiv.dataset.other = true;
                    optionsContainer.appendChild(optionDiv);
                });
                container.appendChild(optionsContainer);

                const selectedSpan = selectBox.querySelector('span');
                const chevron = selectBox.querySelector('i');

                // Toggle dropdown
                selectBox.addEventListener('click', (e) => {
                    e.stopPropagation();

                    // Close any other open dropdown
                    if (openDropdown && openDropdown !== optionsContainer) {
                        openDropdown.classList.add('hidden');
                        openDropdown.previousSibling.querySelector('i').classList.remove('rotate-180');
                    }

                    optionsContainer.classList.toggle('hidden');
                    chevron.classList.toggle('rotate-180');
                    openDropdown = optionsContainer.classList.contains('hidden') ? null : optionsContainer;
                });

                optionsContainer.querySelectorAll('div').forEach(option => {
                    option.addEventListener('click', (e) => {
                        e.stopPropagation();

                        if (option.dataset.other) {
                            const category = placeholder.replace(/^Select\s+/i, ''); // Extract category name
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.placeholder = `Enter custom ${category.toLowerCase()}`;
                            input.className = 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cream-900';
                            selectBox.replaceWith(input);
                            optionsContainer.classList.add('hidden');
                            chevron.classList.remove('rotate-180');

                            input.focus();

                            input.addEventListener('blur', () => {
                                if (input.value.trim() === '') {
                                    container.selectedValue = '';
                                    container.innerHTML = '';
                                    container.appendChild(selectBox);
                                    container.appendChild(optionsContainer);
                                    selectedSpan.textContent = placeholder;
                                } else {
                                    container.selectedValue = input.value.trim();
                                    selectedSpan.textContent = input.value;
                                    container.innerHTML = '';
                                    container.appendChild(selectBox);
                                    container.appendChild(optionsContainer);
                                }
                            });
                        } else {
                            container.selectedValue = option.textContent;
                            selectedSpan.textContent = option.textContent;
                            optionsContainer.classList.add('hidden');
                            chevron.classList.remove('rotate-180');
                        }

                        openDropdown = null;
                    });
                });
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', () => {
                if (openDropdown) {
                    openDropdown.classList.add('hidden');
                    const chevron = openDropdown.previousSibling.querySelector('i');
                    if (chevron) chevron.classList.remove('rotate-180');
                    openDropdown = null;
                }
            });
        }

        // Initialize all custom selects on page load
        initializeCustomSelects();

        // ========================================
        // COLLECT FORM DATA
        // ========================================

        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("dress-form");

            form.addEventListener("submit", (e) => {
                e.preventDefault();
                let isValid = true;

                /*
                // ========== Basic text inputs ==========
                const fields = [ 
                    { id: "first-name", errorId: "first-name-error" },
                    { id: "last-name", errorId: "last-name-error" },
                    { id: "phone", errorId: "phone-error", regex: /^\(?\d{3}\)?[- ]?\d{3}[- ]?\d{4}$/ },
                    { id: "email", errorId: "email-error", regex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/ },
                    { id: "dress-title", errorId: "dress-title-error" },
                    { id: "dress-asking-price", errorId: "dress-asking-price-error" }
                ];

                fields.forEach(f => {
                    const input = document.getElementById(f.id);
                    const errorEl = document.getElementById(f.errorId);
                    if (!input.value.trim() || (f.regex && !f.regex.test(input.value.trim()))) {
                        input.classList.add("field-error");
                        errorEl.style.display = "block";
                        isValid = false;
                    } else {
                        input.classList.remove("field-error");
                        errorEl.style.display = "none";
                    }
                });

                // ========== Contact methods ==========
                const contactMethods = document.querySelectorAll('input[name="contactMethods"]:checked');
                const contactError = document.getElementById("contact-methods-error");
                if (contactMethods.length === 0) {
                    contactError.style.display = "block";
                    isValid = false;
                } else {
                    contactError.style.display = "none";
                }

                // ========== Photos ==========
                if (uploadedFiles.length === 0) {
                    document.getElementById("photos-error").style.display = "block";
                    isValid = false;
                } else {
                    document.getElementById("photos-error").style.display = "none";
                }

                // ========== Custom selects ==========
                const customSelects = [
                    { name: "size", errorId: "size-error" },
                    { name: "color", errorId: "color-error" },
                    { name: "condition", errorId: "condition-error" },
                    { name: "location", errorId: "location-error" }
                ];

                customSelects.forEach(sel => {
                    const container = document.querySelector(`[data-name="${sel.name}"]`);
                    const errorEl = document.getElementById(sel.errorId);

                    if (!container || !container.selectedValue || container.selectedValue.trim() === '') {
                        if (container) {
                            const selectBox = container.querySelector('div');
                            if (selectBox) selectBox.classList.add("field-error");
                        }
                        errorEl.style.display = "block";
                        isValid = false;
                    } else {
                        const selectBox = container.querySelector('div');
                        if (selectBox) selectBox.classList.remove("field-error");
                        errorEl.style.display = "none";
                    }
                });
                */


                // Final check
                if (isValid) {
                    const submitBtn = document.getElementById("submit-btn");
                    submitBtn.disabled = true;
                    submitBtn.textContent = "Processing...";

                    // Get order total
                    const totalAmount = parseFloat(document.getElementById("order-total").textContent.replace('$', ''));

                    // Function to save to Firestore
                    const saveToFirestore = async () => {
                        try {
                            // 1. Upload each file to Firebase Storage and get URLs
                            const uploadedURLs = [];
                            for (const file of uploadedFiles) {
                                const storageRef = firebase.storage().ref(`dressImages/${Date.now()}-${file.name}`);
                                await storageRef.put(file);
                                const downloadURL = await storageRef.getDownloadURL();
                                uploadedURLs.push(downloadURL);
                            }

                            // 2. Build Firestore data with URLs
                            const formData = {
                                sellerInfo: {
                                    firstName: document.getElementById("first-name").value.trim(),
                                    lastName: document.getElementById("last-name").value.trim(),
                                    phone: document.getElementById("phone").value.trim(),
                                    email: document.getElementById("email").value.trim(),
                                    contactMethods: Array.from(document.querySelectorAll('input[name="contactMethods"]:checked')).map(el => el.value),
                                },
                                dressInfo: {
                                    title: document.getElementById("dress-title").value.trim(),
                                    brand: document.querySelector('[data-name="brand"]').selectedValue || '',
                                    category: document.querySelector('[data-name="category"]').selectedValue || '',
                                    size: document.querySelector('[data-name="size"]').selectedValue || '',
                                    color: document.querySelector('[data-name="color"]').selectedValue || '',
                                    condition: document.querySelector('[data-name="condition"]').selectedValue || '',
                                    location: document.querySelector('[data-name="location"]').selectedValue || '',
                                },
                                images: uploadedURLs,
                                pricing: {
                                    askingPrice: parseFloat(document.getElementById("dress-asking-price").value) || 0,
                                    originalPrice: parseFloat(document.getElementById("dress-paid").value) || 0,
                                    negotiable: document.getElementById("dress-negotiable").checked,
                                    totalAmount: totalAmount,
                                },
                                additionalInfo: {
                                    description: document.getElementById("dress-description").value.trim(),
                                },
                                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                                status: 'pending',
                                sold: false
                            };

                            // 3. Save to Firestore
                            await firebase.firestore().collection('dressListings').add(formData);

                            alert("✅ Payment successful and listing created!");
                            submitBtn.disabled = false;
                            submitBtn.textContent = "Complete Secure Payment";

                            // Reset form and images
                            document.getElementById("dress-form").reset();
                            uploadedFiles = [];
                            document.getElementById("image-preview").innerHTML = '';

                        } catch (error) {
                            console.error("Error adding document: ", error);
                            alert("⚠️ Payment succeeded but saving listing failed.");
                            submitBtn.disabled = false;
                            submitBtn.textContent = "Complete Secure Payment";
                        }
                    };


                    if (totalAmount > 0) {
                        // Stripe payment required
                        stripe.createPaymentMethod({
                            type: 'card',
                            card: cardElement,
                            billing_details: {
                                name: document.getElementById("first-name").value + " " + document.getElementById("last-name").value,
                                email: document.getElementById("email").value,
                            },
                        }).then(result => {
                            const cardErrors = document.getElementById("card-errors");
                            if (result.error) {
                                cardErrors.textContent = result.error.message;
                                submitBtn.disabled = false;
                                submitBtn.textContent = "Complete Secure Payment";
                            } else {
                                // PaymentMethod created → here you would normally confirm payment with your server
                                console.log("PaymentMethod ID:", result.paymentMethod.id);
                                cardErrors.textContent = '';

                                // For testing without backend, treat as "successful payment"
                                saveToFirestore();
                            }
                        });
                    } else {
                        // Total $0 → skip Stripe, just save directly
                        const cardErrors = document.getElementById("card-errors");
                        cardErrors.textContent = ''; // hide previous card errors
                        saveToFirestore();
                    }
                } else {
                    console.log("Form has errors ❌");
                    const firstError = document.querySelector('.error-message[style*="block"], .field-error');
                    if (firstError) firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        });
    </script>
</body>


</html>
