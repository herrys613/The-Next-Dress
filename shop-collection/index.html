<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shop Collection | The Next Dress</title>
    <meta name="description" content="Find your next dress today. Easily browse styles, colors, and sizes you love.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Shop Collection | The Next Dress">
    <meta property="og:description"
        content="Find your next dress today. Easily browse styles, colors, and sizes you love.">
    <meta property="og:url" content="https://www.thenextdress.com/shop-collection/">
    <meta property="og:image" content="https://www.thenextdress.com/images/shop-collection-social-preview.png">
    <meta property="og:image:alt" content="Browse and shop modest dresses online at The Next Dress">
    <meta property="og:site_name" content="The Next Dress">

    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
    <link rel="canonical" href="https://www.thenextdress.com/shop-collection/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/tailwind.config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<style>
    .modal-open {
        overflow-y: scroll;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
    }

    /* Loading animation */
    .loading-dots {
        display: inline-flex;
        gap: 4px;
    }

    .loading-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #8B7F7F;
        animation: pulse 1.4s ease-in-out infinite both;
    }

    .loading-dot:nth-child(2) {
        animation-delay: 0.2s;
    }

    .loading-dot:nth-child(3) {
        animation-delay: 0.4s;
    }

    .loading-dot:nth-child(4) {
        animation-delay: 0.6s;
    }

    @keyframes pulse {

        0%,
        80%,
        100% {
            transform: scale(0.8);
            opacity: 0.5;
        }

        40% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* Image Slider Dots */
    * Image slider styles */ .image-slider-container {
        position: relative;
        overflow: hidden;
    }

    .slider-dots {
        position: absolute;
        bottom: 8px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        justify-content: center;
        gap: 6px;
        z-index: 10;
    }

    .slider-dot {
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.2s ease;
        backdrop-filter: blur(4px);
    }

    .slider-dot.active {
        background-color: rgba(255, 255, 255, 0.9);
        transform: scale(1.2);
    }

    .slider-dot:hover {
        background-color: rgba(255, 255, 255, 0.8);
        transform: scale(1.1);
    }

    /* Navigation arrows */
    .slider-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 32px;
        height: 32px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        opacity: 0;
        transition: all 0.2s ease;
        backdrop-filter: blur(4px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .slider-nav:hover {
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .slider-nav.prev {
        left: 8px;
    }

    .slider-nav.next {
        right: 8px;
    }

    .image-slider-container:hover .slider-nav {
        opacity: 1;
    }

    .single-image .slider-nav {
        display: none;
    }
</style>

<body">
    <!-- Navbar -->
    <header class="bg-white border-b border-gray-200">
        <nav x-data="{ isOpen: false }" class="max-w-[2000px] p-5 mx-auto lg:px-8 lg:py-5">
            <div class="flex justify-between items-center relative">
                <!-- Logo -->
                <a href="/">
                    <img class="h-8 sm:h-10" src="/images/logo.png" alt="logo">
                </a>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex absolute left-1/2 transform -translate-x-1/2 space-x-12">
                    <a href="/" class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Home</a>
                    <a href="/shop-collection/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">About
                        us</a>
                    <a href="/contact/"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Contact</a>
                </div>


                <!-- Login -->
                <div class="hidden lg:flex items-center">
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login/">
                        Log in
                    </a>
                </div>

                <!-- Mobile menu button -->
                <div class="flex lg:hidden">
                    <button x-cloak @click="isOpen = !isOpen" type="button"
                        class="text-charcoal-800  hover:text-charcoal-900  focus:outline-none focus:text-charcoal-900"
                        aria-label="toggle menu">
                        <svg x-show="!isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
                        </svg>

                        <svg x-show="isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu open: "block", Menu closed: "hidden"-->
            <div x-cloak :class="[isOpen ? 'translate-x-0 opacity-100 ' : 'opacity-0 -translate-x-full']"
                class="lg:hidden absolute inset-x-0 transition-all duration-300 ease-in-out bg-white border-b border-gray-200 shadow-lg z-40">
                <div class="px-4 py-6 space-y-4">
                    <a href="/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Home</a>
                    <a href="/shop-collection/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">About
                        us</a>
                    <a href="/contact/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Contact</a>
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login/">
                        Log in
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Filter backdrop for mobile -->
    <div id="filter-backdrop" class="filter-backdrop" onclick="closeFilterSidebar()"></div>

    <div class="max-w-[2000px] mx-auto flex flex-col md:flex-row md:min-h-screen relative">
        <!-- FilterSidebar -->
        <aside class="absolute top-0 left-0 z-50 h-full w-2/3 bg-white shadow-lg transform transition-transform duration-500
         -translate-x-full md:translate-x-0 md:static md:w-[300px] md:h-auto md:shadow-none md:border-r md:space-y-4"
            id="filterSidebar">
            <div class="filter-sidebar-scroll px-6 py-2">
                <div class="flex justify-end py-2 md:hidden">
                    <button id="closeFilterBtn" onclick="closeFilterSidebar()"
                        class="text-charcoal-600 hover:text-black">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-xl font-semibold">Filters</h2>
                    <button onclick="resetFilters()" class="text-sm text-warm-gray-500 hover:underline font-medium">
                        Reset All
                    </button>
                </div>

                <!-- Price Range -->
                <div>
                    <button onclick="toggleSection('price')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Price
                        <span id="icon-price">+</span>
                    </button>
                    <div id="section-price" class="mt-5 hidden">
                        <input type="range" id="priceRange" min="100" max="2000" step="10" class="w-full" value="2000"
                            oninput="updatePriceLabel()">
                        <p class="text-sm text-charcoal-600 mt-1">Up to $<span id="priceLabel">0</span></p>
                    </div>
                </div>

                <!-- Sizes -->
                <div>
                    <button onclick="toggleSection('sizes')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Sizes
                        <span id="icon-sizes">+</span>
                    </button>
                    <div id="section-sizes" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Brands -->
                <div>
                    <button onclick="toggleSection('brands')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Brands
                        <span id="icon-brands">+</span>
                    </button>
                    <div id="section-brands" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Colors -->
                <div>
                    <button onclick="toggleSection('colors')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Colors
                        <span id="icon-colors">+</span>
                    </button>
                    <div id="section-colors" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Condition -->
                <div>
                    <button onclick="toggleSection('condition')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Condition
                        <span id="icon-condition">+</span>
                    </button>
                    <div id="section-condition" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Category -->
                <div>
                    <button onclick="toggleSection('category')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Category
                        <span id="icon-category">+</span>
                    </button>
                    <div id="section-category" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Apply Filters Button -->
                <div class="mt-6">
                    <button onclick="applyFilters()"
                        class="w-full bg-black text-white font-semibold py-2 px-4 rounded-lg hover:bg-warm-gray-500 transition duration-200">
                        Apply Filters
                    </button>
                </div>
        </aside>


        <main id="dresses-container" class="flex-1 p-5 min-h-screen">
            <!-- Header with Search -->
            <div class="mb-3">
                <div class="flex flex-col gap-4">
                    <!-- Title and Search Row -->
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <div>
                            <h1 class="text-xl font-bold text-charcoal-800">Dress Listings</h1>
                        </div>

                        <!-- Search Bar -->
                        <div class="relative w-full sm:w-96">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                            <input id="search-bar" type="text" placeholder="Search your listings..."
                                onkeyup="filterCars()" oninput="updateSuggestions()" autocomplete="off"
                                class="w-full text-sm pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent" />

                            <!-- Suggestions Dropdown -->
                            <ul id="dress-suggestions"
                                class="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scroll hidden">
                            </ul>
                        </div>
                    </div>

                    <!-- Controls Row - Sort By and Filter Pills -->
                    <div class="flex items-center justify-between gap-4">
                        <!-- Sort By and Filter Pills -->
                        <div class="flex items-center gap-3">
                            <!-- Sort By Dropdown -->
                            <div class="relative" x-data="{ open: false }" x-data="{ open: false }">
                                <button @click="open = !open" @click.away="open = false"
                                    class="flex items-center gap-2 px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent transition-colors">
                                    <i class="fas fa-sort text-gray-500"></i>
                                    <span id="sort-label">Sort By</span>
                                    <i class="fas fa-chevron-down text-xs text-gray-500 transition-transform"
                                        :class="{ 'rotate-180': open }"></i>
                                </button>

                                <div x-show="open" style="display: none;"
                                    x-transition:enter="transition ease-out duration-200"
                                    x-transition:enter-start="opacity-0 scale-95"
                                    x-transition:enter-end="opacity-100 scale-100"
                                    x-transition:leave="transition ease-in duration-150"
                                    x-transition:leave-start="opacity-100 scale-100"
                                    x-transition:leave-end="opacity-0 scale-95"
                                    class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20">
                                    <div class="py-1">
                                        <button onclick="sortDresses('price-low')"
                                            class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                            Price: Low to High
                                        </button>
                                        <button onclick="sortDresses('price-high')"
                                            class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                            Price: High to Low
                                        </button>
                                        <button onclick="sortDresses('newest')"
                                            class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                            Newest First
                                        </button>
                                        <button onclick="sortDresses('oldest')"
                                            class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                            Oldest First
                                        </button>
                                        <button onclick="sortDresses('brand')"
                                            class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                            Brand (A-Z)
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Filter Toggle Button -->
                            <button id="filter-toggle" onclick="toggleFilterSidebar()"
                                class="flex items-center gap-2 px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent transition-colors lg:hidden">
                                <i class="fas fa-filter text-gray-500"></i>
                                <span>Filter</span>
                            </button>

                            <!-- Active Filters Pills (Desktop) -->
                            <div id="active-filters" class="hidden lg:flex items-center gap-2">
                                <!-- Active filter pills will be populated here -->
                            </div>
                        </div>

                        <!-- Results Count -->
                        <div class="text-xs text-charcoal-600">
                            <span id="results-count">0</span> dresses found
                        </div>
                    </div>

                    <!-- Active Filters Pills (Mobile) -->
                    <div id="active-filters-mobile" class="flex lg:hidden flex-wrap items-center gap-2">
                        <!-- Active filter pills for mobile will be populated here -->
                    </div>
                </div>
            </div>


            <!-- Loading State -->
            <div id="loading-wrapper" class="flex justify-center items-center h-64">
                <div class="text-center">
                    <div class="loading-dots mb-4">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                    <p class="text-charcoal-600">Loading dress collection...</p>
                </div>
            </div>

            <!-- Listings Grid -->
            <div id="dress-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Cards will be populated by JavaScript -->
            </div>

            <!-- No Results Message -->
            <div id="no-match-message" class="text-center py-12 hidden">
                <i class="fas fa-search text-gray-300 text-4xl mb-4"></i>
                <h3 class="text-lg font-medium text-charcoal-800 mb-2">No dresses found</h3>
                <p class="text-charcoal-600">Try adjusting your search criteria or check back later for new listings</p>
            </div>

            <div id="pagination-wrapper" class="my- flex justify-center">
                <div id="pagination" class="pagination-buttons flex flex-wrap gap-2"></div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-cream-200 border-t">
        <div class="max-w-[2000px] p-6 lg:pt-10 lg:px-16 mx-auto">
            <div class="lg:flex">
                <div class="w-full pb-8 lg:w-2/5">
                    <a href="/">
                        <img class="w-auto h-9" src="/images/logo.png" alt="logo">
                    </a>
                    <p class="max-w-sm text-xs text-charcoal-800">Modest Dress Marketplace.</p>
                    <div class="flex space-x-4 mt-4">
                        <a href="https://wa.me/9175837073" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Chat on WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://instagram.com/" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Visit Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>

                <div class="mt-0 lg:mt-0 lg:flex-1">
                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3">
                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Company</h3>
                            <a href="/shop-collection/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Shop
                                Collection</a>
                            <a href="/sell-your-dress/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Sell
                                Your Dress</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Partner
                                with
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Support</h3>
                            <a href="/#faq" class="block mt-2 text-sm text-charcoal-600  hover:underline">FAQ</a>
                            <a href="/pricing/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Pricing</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Contact
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Get in touch</h3>
                            <span class="block mt-2 text-sm text-charcoal-600  hover:underline">+1 (555)
                                000-0000</span>
                            <span
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">thenextdresscollection@gmail.com</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="h-px my-6 bg-gray-200 border-none ">

            <div>
                <p class="text-center text-charcoal-600">&copy;
                    <script>
                        document.write(new Date().getFullYear())
                    </script> The next dress. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyDzYucxzEhmH3XgxGZd_YODxzzvpNp2P0s",
            authDomain: "project-2145d.firebaseapp.com",
            projectId: "project-2145d",
            storageBucket: "project-2145d.firebasestorage.app",
            messagingSenderId: "296278039161",
            appId: "1:296278039161:web:e1049596a67bfe51ab12a8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();


        // ====== UTILITY FUNCTIONS ======
        const Utils = {

            getElement: (id) => document.getElementById(id),

            toggleElement: (element, show) => {
                element.classList.toggle('hidden', !show);
            },

            escapeJSON: (obj) => JSON.stringify(obj).replace(/"/g, '&quot;')
        };

        // ====== TOAST NOTIFICATION SYSTEM ======
        const Toast = {
            show: (message, type = 'info') => {
                const container = Utils.getElement('toast-container');
                if (!container) return;

                const toast = document.createElement('div');
                const config = {
                    success: { bg: 'bg-green-500', icon: 'fas fa-check-circle' },
                    error: { bg: 'bg-red-500', icon: 'fas fa-exclamation-circle' },
                    warning: { bg: 'bg-yellow-500', icon: 'fas fa-exclamation-triangle' },
                    info: { bg: 'bg-blue-500', icon: 'fas fa-info-circle' }
                };

                const { bg, icon } = config[type] || config.info;

                toast.className = `${bg} text-white px-4 py-3 rounded-lg shadow-lg flex items-center transform translate-x-full transition-transform duration-300`;
                toast.innerHTML = `
                                    <i class="${icon} mr-2"></i>
                                     <span class="flex-1">${message}</span>
                                      <button onclick="this.parentElement.remove()" class="ml-2 text-white hover:text-gray-200">
                                        <i class="fas fa-times"></i>
                                      </button>
                                `;

                container.appendChild(toast);

                // Animate in
                setTimeout(() => toast.classList.remove('translate-x-full'), 10);

                // Auto remove
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.classList.add('translate-x-full');
                        setTimeout(() => toast.remove(), 300);
                    }
                }, 5000);
            }
        };

        // ====== DRESS DATA MANAGEMENT ======
        function formatCurrency(value) {
            return new Intl.NumberFormat("en-US", {
                style: "currency",
                currency: "USD", minimumFractionDigits: 0,
                maximumFractionDigits: 0

            }).format(value);
        }


        const DressManager = {
            async loadDresses() {
                const container = document.getElementById("dress-cards-container");
                const loading = document.getElementById("loading-wrapper");
                const noResults = document.getElementById("no-match-message");

                try {
                    // show loading, hide "no results"
                    loading.classList.remove("hidden");
                    loading.classList.add("block");
                    container.innerHTML = "";
                    noResults.classList.add("hidden");

                    const querySnapshot = await db.collection("dressListings")
                        .orderBy("timestamp", "desc")
                        .get();

                    // hide loading
                    loading.classList.remove("block");
                    loading.classList.add("hidden");

                    if (querySnapshot.empty) {
                        noResults.classList.remove("hidden");
                        noResults.classList.add("block");
                        updateResultsCount(0);
                        return;
                    }

                    AppState.dresses = [];
                    querySnapshot.forEach(doc => {
                        const dress = { id: doc.id, ...doc.data() };
                        AppState.dresses.push(dress);
                    });

                    this.displayDresses(AppState.dresses);
                    updateResultsCount(AppState.dresses.length);

                } catch (error) {
                    console.error("Error loading dresses:", error);
                    loading.classList.remove("block");
                    loading.classList.add("hidden");
                }
            },



            displayDresses(dresses) {
                const container = document.getElementById("dress-cards-container");
                container.innerHTML = "";

                dresses.forEach(dress => {
                    const dressCard = this.createDressCard(dress);
                    container.appendChild(dressCard);
                });

                setTimeout(() => this.initializeAllSliders(), 100);
            },

            createDressCard(dress) {
                const card = document.createElement("div");
                card.className = "bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden animate-fadeInUp";

                const images = dress.images?.length > 0 ? dress.images : ['/images/placeholder-dress.jpg'];
                const price = formatCurrency(dress.pricing?.askingPrice || 0);
                const originalPrice = dress.pricing?.originalPrice ? formatCurrency(dress.pricing.originalPrice) : null;
                const savings = (dress.pricing?.originalPrice && dress.pricing?.askingPrice)
                    ? Math.round(((dress.pricing.originalPrice - dress.pricing.askingPrice) / dress.pricing.originalPrice) * 100)
                    : 0;

                const imageSliderHTML = images.map(img =>
                    `<img loading="lazy" src="${img}" alt="Dress Image" class="flex-shrink-0 w-full h-[300px] object-contain slider-image">`
                ).join('');

                const dotsHTML = images.length > 1
                    ? images.map((_, index) =>
                        `<div class="slider-dot ${index === 0 ? 'active' : ''}" onclick="ImageSlider.goToSlide(this, ${index})"></div>`
                    ).join('')
                    : '';

                // Calculate days since posted
                const timestamp = dress.timestamp?.toDate() || new Date();
                const daysAgo = Math.floor((Date.now() - timestamp.getTime()) / (1000 * 60 * 60 * 24));
                const timeText = daysAgo === 0 ? 'Today' : daysAgo === 1 ? '1d ago' : `${daysAgo}d ago`;

                card.innerHTML = `
               <!-- Image Container -->
               <div class="relative w-full rounded-t-lg overflow-hidden image-slider-container ${images.length === 1 ? 'single-image' : ''} bg-zinc-100">
                 <!-- Image slider -->
                 <div class="flex transition-transform duration-300 ease-in-out image-slider" data-current="0">
                   ${imageSliderHTML}
                 </div>
                 <!-- Navigation arrows -->
                 <button class="hidden sm:flex slider-nav prev" onclick="ImageSlider.slide(this, -1)">
                   <i class="fas fa-chevron-left text-gray-700 text-sm"></i>
                 </button>
                 <button class="hidden sm:flex slider-nav next" onclick="ImageSlider.slide(this, 1)">
                   <i class="fas fa-chevron-right text-gray-700 text-sm"></i>
                 </button>
               
                 <!-- label Badge -->
                 ${dress.dressInfo.label ? `
                 <div class="absolute top-3 left-3 bg-red-100 text-red-600 text-xs font-semibold px-2.5 py-1 rounded-full border border-red-200">
                   ${dress.dressInfo.label}
                 </div>
                 ` : ''}
               
                 <!-- Dot indicators -->
                 <div class="slider-dots">${dotsHTML}</div>
               </div>
               
               <!-- Content -->
               <div class="p-6">
                 <!-- Brand & Title -->
                 <div class="mb-3">
                   <h3 class="font-bold text-charcoal-800 text-[clamp(16px,5vw,20px)] truncate">${dress.dressInfo.title}</h3>
                   <!--<p class="text-sm text-charcoal-600 font-medium">${dress.dressInfo.brand.toUpperCase()}</p>-->
                 </div>
               
                 <!-- Price Section -->
                 <div class="mb-4">
                   <div class="text-[clamp(16px,5vw,21px)] font-bold text-charcoal-700">
                     ${price}
                   </div>
                   <div class="text-[clamp(10px,3vw,13px)] text-gray-500">
                     Originally Paid ${originalPrice || "$ -"}
                   </div>
                   <div class="text-[clamp(10px,3vw,13px)] text-gray-500 mt-1">
                     Save ${savings > 0 ? savings + "%" : "0%"}
                   </div>
                 </div>
               
                 <!-- Key Details Grid -->
                 <div class="grid grid-cols-2 gap-3 mb-4">
                   <div class="flex items-center gap-2">
                     <i class="fas fa-ruler text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                     <span class="text-[clamp(12px,3vw,14px)] text-gray-700">Size ${dress.dressInfo.size}</span>
                   </div>
                   <div class="flex items-center gap-2">
                     <i class="fas fa-palette text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                     <span class="text-[clamp(12px,3vw,14px)] text-gray-700">${dress.dressInfo.color}</span>
                   </div>
                   <div class="flex items-center gap-2">
                     <i class="fas fa-map-marker-alt text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                     <span class="text-[clamp(12px,3vw,14px)] text-gray-700">${dress.dressInfo.location}</span>
                   </div>
                   <div class="flex items-center gap-2">
                     <i class="fas fa-calendar text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                     <span class="text-[clamp(12px,3vw,14px)] text-gray-700">Posted ${timeText}</span>
                   </div>
                 </div>
               
                 <!-- Action Buttons -->
                 <div class="flex gap-2">
                   <button onclick='viewDressDetails(${Utils.escapeJSON(dress)})' class="flex-1 text-white py-2.5 px-4 rounded-lg font-medium bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 transition-colors">
                     View Details
                   </button>
                   <button class="px-4 py-2.5 border border-charcoal-300 rounded-lg hover:border-charcoal-400 transition-colors">
                     <i class="far fa-comment text-charcoal-600"></i>
                   </button>
                   <button class="px-4 py-2.5 border border-charcoal-300 rounded-lg hover:border-charcoal-400 transition-colors">
                     <i class="fas fa-share text-charcoal-600"></i>
                   </button>
                 </div>
               </div>
                   `;

                return card;
            },

            initializeAllSliders() {
                document.querySelectorAll('.image-slider-container').forEach(container => {
                    ImageSlider.initialize(container);
                });
            }
        };

        // ========================================
        // IMAGE SLIDER FUNCTIONALITY 
        // ========================================

        const ImageSlider = {
            slide(button, direction) {
                const container = button.closest('.image-slider-container');
                const slider = container.querySelector('.image-slider');
                const images = slider.querySelectorAll('.slider-image');
                const dots = container.querySelectorAll('.slider-dot');

                let currentIndex = parseInt(slider.dataset.current) || 0;
                const totalImages = images.length;

                currentIndex = (currentIndex + direction + totalImages) % totalImages;

                slider.style.transform = `translateX(-${currentIndex * 100}%)`;
                slider.dataset.current = currentIndex;

                this.updateDots(dots, currentIndex);
            },

            goToSlide(dot, index) {
                const container = dot.closest('.image-slider-container');
                const slider = container.querySelector('.image-slider');
                const dots = container.querySelectorAll('.slider-dot');

                slider.style.transform = `translateX(-${index * 100}%)`;
                slider.dataset.current = index;

                this.updateDots(dots, index);
            },

            updateDots(dots, activeIndex) {
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === activeIndex);
                });
            },

            initialize(container) {
                const slider = container.querySelector('.image-slider');
                const images = slider.querySelectorAll('.slider-image');

                if (images.length <= 1) {
                    container.classList.add('single-image');
                    return;
                }

                this.setupTouchEvents(slider, container);
                this.setupMouseEvents(slider, container);
            },

            setupTouchEvents(slider, container) {
                let startX = 0;
                let currentX = 0;
                let isDragging = false;

                slider.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    isDragging = true;
                    slider.style.transition = 'none';
                });

                slider.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;

                    currentX = e.touches[0].clientX;
                    const diff = currentX - startX;
                    const currentIndex = parseInt(slider.dataset.current) || 0;
                    const translateX = -currentIndex * 100 + (diff / container.offsetWidth * 100);

                    slider.style.transform = `translateX(${translateX}%)`;
                });

                slider.addEventListener('touchend', () => {
                    if (!isDragging) return;

                    isDragging = false;
                    slider.style.transition = 'transform 0.3s ease-in-out';

                    const diff = currentX - startX;
                    const threshold = container.offsetWidth * 0.2;

                    if (Math.abs(diff) > threshold) {
                        const direction = diff > 0 ? -1 : 1;
                        const navButton = container.querySelector('.slider-nav.next');
                        this.slide(navButton, direction);
                    } else {
                        const currentIndex = parseInt(slider.dataset.current) || 0;
                        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
                    }
                });
            },

            setupMouseEvents(slider, container) {
                let startX = 0;
                let currentX = 0;
                let isMouseDown = false;

                const handleMouseDown = (e) => {
                    startX = e.clientX;
                    isMouseDown = true;
                    slider.style.transition = 'none';
                    slider.style.cursor = 'grabbing';
                };

                const handleMouseMove = (e) => {
                    if (!isMouseDown) return;

                    currentX = e.clientX;
                    const diff = currentX - startX;
                    const currentIndex = parseInt(slider.dataset.current) || 0;
                    const translateX = -currentIndex * 100 + (diff / container.offsetWidth * 100);

                    slider.style.transform = `translateX(${translateX}%)`;
                };

                const handleMouseEnd = () => {
                    if (!isMouseDown) return;

                    isMouseDown = false;
                    slider.style.transition = 'transform 0.3s ease-in-out';
                    slider.style.cursor = 'grab';

                    const diff = currentX - startX;
                    const threshold = container.offsetWidth * 0.2;

                    if (Math.abs(diff) > threshold) {
                        const direction = diff > 0 ? -1 : 1;
                        const navButton = container.querySelector('.slider-nav.next');
                        this.slide(navButton, direction);
                    } else {
                        const currentIndex = parseInt(slider.dataset.current) || 0;
                        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
                    }
                };

                slider.addEventListener('mousedown', handleMouseDown);
                slider.addEventListener('mousemove', handleMouseMove);
                slider.addEventListener('mouseup', handleMouseEnd);
                slider.addEventListener('mouseleave', handleMouseEnd);
            }
        }

        // ========================================
        // SEARCH AND FILTER FUNCTIONALITY 
        // ========================================

        function toggleFilterSidebar() {
            const sidebar = document.getElementById('filterSidebar');
            const isHidden = sidebar.classList.contains('-translate-x-full');

            if (isHidden) {
                sidebar.classList.remove('-translate-x-full');
                sidebar.classList.add('translate-x-0');
            } else {
                closeFilterSidebar();
            }
        }

        function closeFilterSidebar() {
            const sidebar = document.getElementById('filterSidebar');

            sidebar.classList.add('-translate-x-full');
            sidebar.classList.remove('translate-x-0');
        }

        const FilterUI = {
            toggleSection(id) {
                const section = Utils.getElement(`section-${id}`);
                const icon = Utils.getElement(`icon-${id}`);

                section.classList.toggle('hidden');
                icon.textContent = section.classList.contains('hidden') ? '+' : 'âˆ’';
            },

            populateCheckboxes(list, containerId) {
                const container = Utils.getElement(containerId);
                container.innerHTML = '';

                const uncheckWrapper = document.createElement('div');
                uncheckWrapper.className = 'flex items-center space-x-2 mb-1';
                uncheckWrapper.innerHTML = `
          <input type="checkbox" class="uncheck-all" id="uncheck-${containerId}" />
          <label class="text-sm font-semibold text-gray-700">Uncheck All</label>
        `;
                container.appendChild(uncheckWrapper);

                uncheckWrapper.querySelector('input').addEventListener('change', function () {
                    container.querySelectorAll('input.option').forEach(cb => cb.checked = false);
                    SearchFilter.applyFilters();
                });

                list.forEach(item => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'flex items-center space-x-2';
                    wrapper.innerHTML = `
            <input type="checkbox" value="${item}" class="option" />
            <label class="text-sm text-gray-700">${item}</label>
          `;
                    container.appendChild(wrapper);
                });

                container.addEventListener('change', e => {
                    if (e.target.classList.contains('option') && e.target.checked) {
                        const uncheckAll = container.querySelector('.uncheck-all');
                        if (uncheckAll) uncheckAll.checked = false;
                    }
                });
            },

            initialize() {
                this.populateCheckboxes(FilterData.sizes, 'section-sizes');
                this.populateCheckboxes(FilterData.brands, 'section-brands');
                this.populateCheckboxes(FilterData.colors, 'section-colors');
                this.populateCheckboxes(FilterData.conditions, 'section-condition');
                this.populateCheckboxes(FilterData.categories, 'section-category');
                SearchFilter.updatePriceLabel();
            }
        };

        const AppState = {
            dresses: [],
            filteredDresses: [],
            filters: {
                price: 500,
                sizes: [],
                brands: [],
                colors: [],
                condition: [],
                category: []
            },
            ui: {
                chatVisible: false,
                chatClosed: false
            }
        };

        // Filter data for dresses
        const FilterData = {
            sizes: ['0-32', '2-34', '4-36', '6-38', '8-40', '10-42', '12-44', '14-46', '16-48', '18-50'],
            brands: ['Zara', 'H&M', 'Forever 21', 'ASOS', 'Mango', 'Uniqlo', 'GAP', 'Banana Republic',
                'Ann Taylor', 'J.Crew', 'Kate Spade', 'Michael Kors', 'Coach', 'Diane von Furstenberg',
                'Calvin Klein', 'Tommy Hilfiger', 'Ralph Lauren', 'Hugo Boss', 'Armani', 'Gucci',
                'Prada', 'Versace', 'Dolce & Gabbana', 'Chanel', 'Dior', 'Saint Laurent'],
            colors: ['Black', 'White', 'Gray', 'Navy', 'Beige', 'Pink', 'Red', 'Blue', 'Green', 'Yellow',
                'Orange', 'Purple', 'Brown', 'Burgundy', 'Coral', 'Mint', 'Lavender', 'Gold', 'Silver'],
            conditions: ['New with Tags', 'Excellent', 'Good', 'Fair'],
            categories: ['Casual', 'Formal', 'Cocktail', 'Evening', 'Maxi', 'Mini', 'Midi', 'A-Line',
                'Bodycon', 'Wrap', 'Shift', 'Sweater', 'Sundress', 'Little Black Dress']
        };


        const SearchFilter = {
            filterDresses() {
                const searchTerm = Utils.getElement("search-bar").value.toLowerCase();
                const cards = document.querySelectorAll("#dress-cards-container > div");
                const noResults = Utils.getElement("no-match-message");
                let visibleCount = 0;

                cards.forEach(card => {
                    const text = card.textContent.toLowerCase();
                    const isVisible = text.includes(searchTerm);
                    card.style.display = isVisible ? "block" : "none";
                    if (isVisible) visibleCount++;
                });

                Utils.toggleElement(noResults, visibleCount === 0 && searchTerm !== "");
                updateResultsCount(visibleCount);
            },


            applyFilters() {
                AppState.filters.sizes = this.getCheckedValues('sizes');
                AppState.filters.brands = this.getCheckedValues('brands');
                AppState.filters.colors = this.getCheckedValues('colors');
                AppState.filters.condition = this.getCheckedValues('condition');
                AppState.filters.category = this.getCheckedValues('category');
                AppState.filters.price = parseInt(Utils.getElement('priceRange').value);

                const filtered = AppState.dresses.filter(dress => {
                    const price = dress.pricing?.askingPrice || 0;
                    const matchesPrice = price <= AppState.filters.price;
                    const matchesSize = AppState.filters.sizes.length === 0 || AppState.filters.sizes.includes(dress.dressInfo.size);
                    const matchesBrand = AppState.filters.brands.length === 0 || AppState.filters.brands.includes(dress.dressInfo.brand);
                    const matchesColor = AppState.filters.colors.length === 0 || AppState.filters.colors.includes(dress.dressInfo.color);
                    const matchesCondition = AppState.filters.condition.length === 0 || AppState.filters.condition.includes(dress.dressInfo.condition);
                    const matchesCategory = AppState.filters.category.length === 0 || AppState.filters.category.includes(dress.dressInfo.category);

                    return matchesPrice && matchesSize && matchesBrand && matchesColor && matchesCondition && matchesCategory;
                });

                if (filtered.length === 0) {
                    Utils.toggleElement(Utils.getElement("no-match-message"), true);
                    Utils.getElement("dress-cards-container").innerHTML = "";
                    updateResultsCount(0);
                } else {
                    Utils.toggleElement(Utils.getElement("no-match-message"), false);
                    DressManager.displayDresses(filtered);
                    updateResultsCount(filtered.length);
                }

                updateActiveFilters();

                if (window.innerWidth < 1024) {
                    closeFilterSidebar();
                }
            },

            resetFilters() {
                AppState.filters = {
                    price: 500,
                    sizes: [],
                    brands: [],
                    colors: [],
                    condition: [],
                    category: []
                };

                Utils.getElement('priceRange').value = 500;
                this.updatePriceLabel();
                document.querySelectorAll('input[type=checkbox]').forEach(cb => cb.checked = false);

                DressManager.displayDresses(AppState.dresses);
                Utils.toggleElement(Utils.getElement("no-match-message"), false);
                updateResultsCount(AppState.dresses.length);

                updateActiveFilters();
            },

            getCheckedValues(type) {
                const section = Utils.getElement(`section-${type}`);
                const uncheckAll = section.querySelector('.uncheck-all');

                if (uncheckAll?.checked) return [];

                return Array.from(section.querySelectorAll('input.option:checked')).map(cb => cb.value);
            },

            updatePriceLabel() {
                const value = Utils.getElement('priceRange').value;
                AppState.filters.price = parseInt(value);
                Utils.getElement('priceLabel').textContent = value;
            }
        };

        function updateActiveFilters() {
            const activeFiltersDesktop = document.getElementById('active-filters');
            const activeFiltersMobile = document.getElementById('active-filters-mobile');

            let filtersHTML = '';

            if (AppState.filters.price < 500) {
                filtersHTML += `
          <div class="filter-pill text-xs">
            <span>Up to ${AppState.filters.price}</span>
            <i class="fas fa-times text-xs remove-filter" onclick="removeFilter('price')"></i>
          </div>
        `;
            }

            ['sizes', 'brands', 'colors', 'condition', 'category'].forEach(filterType => {
                AppState.filters[filterType].forEach(value => {
                    filtersHTML += `
            <div class="filter-pill text-xs">
              <span>${value}</span>
              <i class="fas fa-times text-xs remove-filter" onclick="removeFilter('${filterType}', '${value}')"></i>
            </div>
          `;
                });
            });

            if (filtersHTML) {
                filtersHTML += `
          <button onclick="clearAllFilters()" class="text-xs text-pink-600 hover:text-pink-800 font-medium ml-2">
            Clear All
          </button>
        `;
            }

            activeFiltersDesktop.innerHTML = filtersHTML;
            activeFiltersMobile.innerHTML = filtersHTML;
        }

        function removeFilter(type, value) {
            switch (type) {
                case 'price':
                    AppState.filters.price = 500;
                    document.getElementById('priceRange').value = 500;
                    updatePriceLabel();
                    break;
                case 'sizes':
                    AppState.filters.sizes = AppState.filters.sizes.filter(s => s !== value);
                    const sizeCheckbox = document.querySelector(`#section-sizes input[value="${value}"]`);
                    if (sizeCheckbox) sizeCheckbox.checked = false;
                    break;
                case 'brands':
                    AppState.filters.brands = AppState.filters.brands.filter(b => b !== value);
                    const brandCheckbox = document.querySelector(`#section-brands input[value="${value}"]`);
                    if (brandCheckbox) brandCheckbox.checked = false;
                    break;
                case 'colors':
                    AppState.filters.colors = AppState.filters.colors.filter(c => c !== value);
                    const colorCheckbox = document.querySelector(`#section-colors input[value="${value}"]`);
                    if (colorCheckbox) colorCheckbox.checked = false;
                    break;
                case 'condition':
                    AppState.filters.condition = AppState.filters.condition.filter(c => c !== value);
                    const conditionCheckbox = document.querySelector(`#section-condition input[value="${value}"]`);
                    if (conditionCheckbox) conditionCheckbox.checked = false;
                    break;
                case 'category':
                    AppState.filters.category = AppState.filters.category.filter(c => c !== value);
                    const categoryCheckbox = document.querySelector(`#section-category input[value="${value}"]`);
                    if (categoryCheckbox) categoryCheckbox.checked = false;
                    break;
            }

            SearchFilter.applyFilters();
        }

        function clearAllFilters() {
            SearchFilter.resetFilters();
        }

        function updateResultsCount(count) {
            const resultsCount = document.getElementById('results-count');
            if (resultsCount) {
                resultsCount.textContent = count || 0;
            }
        }

        // ========================================
        // SORTING FUNCTION 
        // ========================================

        let currentSort = 'newest';

        function sortDresses(sortType) {
            currentSort = sortType;

            const sortLabel = document.getElementById('sort-label');
            const labels = {
                'price-low': 'Price: Low to High',
                'price-high': 'Price: High to Low',
                'newest': 'Newest First',
                'oldest': 'Oldest First',
                'brand': 'Brand (A-Z)'
            };
            sortLabel.textContent = labels[sortType] || 'Sort By';

            let sortedDresses = [...AppState.dresses];

            switch (sortType) {
                case 'price-low':
                    sortedDresses.sort((a, b) => (a.price || 0) - (b.price || 0));
                    break;
                case 'price-high':
                    sortedDresses.sort((a, b) => (b.price || 0) - (a.price || 0));
                    break;
                case 'newest':
                    sortedDresses.sort((a, b) => new Date(b.timestamp || 0) - new Date(a.timestamp || 0));
                    break;
                case 'oldest':
                    sortedDresses.sort((a, b) => new Date(a.timestamp || 0) - new Date(b.timestamp || 0));
                    break;
                case 'brand':
                    sortedDresses.sort((a, b) => (a.brand || '').localeCompare(b.brand || ''));
                    break;
            }

            DressManager.displayDresses(sortedDresses);
            updateResultsCount(sortedDresses.length);
        }

        // ========================================
        // VIEW DETAILS MODAL 
        // ========================================

        function viewDressDetails(dress) {
            // Create and show dress details modal
            const images = dress.images?.length > 0 ? dress.images : ['/images/placeholder-dress.jpg'];
            const price = formatCurrency(dress.pricing?.askingPrice || 0);
            const originalPrice = dress.pricing?.originalPrice ? formatCurrency(dress.pricing.originalPrice) : null;
            const savings = (dress.pricing?.originalPrice && dress.pricing?.askingPrice)
                ? Math.round(((dress.pricing.originalPrice - dress.pricing.askingPrice) / dress.pricing.originalPrice) * 100)
                : 0;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
            <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full animate-slideIn">
             <!-- Modal Header -->
             <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-2 rounded-t-xl">
               <div class="flex items-center justify-between">
                 <h2 class="text-[clamp(16px,5vw,18px)] font-semibold text-charcoal-800">Dress Details</h2>
                 <button onclick="this.closest('.fixed').remove(); document.body.style.overflow='';" class="p-2 px-4 text-gray-400 hover:text-charcoal-600 rounded-lg transition-colors">
                   <i class="fas fa-times text-xl"></i>
                 </button>
               </div>
             </div>
           
             <div class="p-6 space-y-4">
               <div class="space-y-2">
                 <h3 class="text-charcoal-800 text-[clamp(16px,5vw,22px)] font-bold leading-tight">${dress.dressInfo.title}</h3>
                 <p class="text-sm text-charcoal-600 font-medium">${dress.dressInfo.brand.toUpperCase()}</p>
               </div>
               ${dress.additionalInfo.description ? `
               <div>
                 <p class="text-charcoal-600 text-[clamp(12px,4vw,16px)] leading-snug">${dress.additionalInfo.description}</p>
               </div>
               ` : ''}

               <!-- Price Section -->
                 <div class="mb-4">
                   <div class="text-[clamp(16px,5vw,21px)] font-bold text-charcoal-700">
                     ${price}
                   </div>
                   <div class="text-[clamp(10px,3vw,13px)] text-gray-500">
                     Originally Paid ${originalPrice || "$ -"}
                   </div>
                   <div class="text-[clamp(10px,3vw,13px)] text-gray-500 mt-1">
                     Save ${savings > 0 ? savings + "%" : "0%"}
                   </div>
                 </div>
           
               <!-- Key Details Grid -->
               <div class="grid gap-3">
                 <div class="flex items-center gap-2">
                   <i class="fas fa-ruler text-gray-400 text-[clamp(12px,4vw,16px)]"></i>
                   <span class="text-[clamp(12px,4vw,16px)] text-gray-700">Size ${dress.dressInfo.size}</span>
                 </div>
                 <div class="flex items-center gap-2">
                   <i class="fas fa-palette text-gray-400 text-[clamp(12px,4vw,16px)]"></i>
                   <span class="text-[clamp(12px,4vw,16px)] text-gray-700">${dress.dressInfo.color}</span>
                 </div>
               </div>
           
               <div class="pt-4 border-t">
                 <div class="flex justify-between text-sm text-charcoal-600 mb-3">
                   <span><i class="fas fa-user mr-1"></i>Seller: ${dress.seller}</span>
                   <span><i class="fas fa-map-marker-alt mr-1"></i>${dress.dressInfo.location}</span>
                 </div>
           
                 <button onclick='contactSeller("${dress.name}", "${dress.seller}")' class="w-full bg-charcoal-800 text-white font-medium py-2 px-4 rounded-lg hover:bg-charcoal-700 transition-colors">
                   Contact Seller
                 </button>
               </div>
             </div>
           </div>
            `;

            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function contactSeller(dressName, sellerName) {
            const message = `Hi ${sellerName}, I'm interested in your "${dressName}" listing. Is it still available?`;
            const whatsappUrl = `https://wa.me/1234567890?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // ====== GLOBAL FUNCTIONS (for HTML onclick handlers) ======
        function toggleSection(id) {
            FilterUI.toggleSection(id);
        }

        function updatePriceLabel() {
            SearchFilter.updatePriceLabel();
        }

        function applyFilters() {
            SearchFilter.applyFilters();
        }

        function resetFilters() {
            SearchFilter.resetFilters();
        }

        function filterDresses() {
            SearchFilter.filterDresses();
        }

        function updateSuggestions() {
            SearchFilter.filterDresses();
        }

        // ====== APPLICATION INITIALIZATION ======
        document.addEventListener("DOMContentLoaded", () => {
            FilterUI.initialize();
            DressManager.loadDresses();
        });
    </script>
    </body>

</html>